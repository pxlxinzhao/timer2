<ion-header>
  <ion-navbar>
    <ion-title>
      Records
    </ion-title>
  </ion-navbar>

  <ion-toolbar>
    <ion-item>
      <ion-label>Choose category</ion-label>
      <ion-select [(ngModel)]="currentCategory">
      <ion-option value="{{categories[key].doc.name}}" *ngFor="let key of categories | keys">{{categories[key].doc.name}}</ion-option>
      </ion-select>
    </ion-item>
  </ion-toolbar>

</ion-header>



<ion-content padding>

  <ion-card *ngFor="let key of records | keys" [hidden]="currentCategory !== records[key].doc.category">
    <!--<ion-card-title></ion-card-title>-->
    <ion-card-header>
      <span class="hoverable" (click)="openTitleDialog(records[key].id)">
        {{records[key].doc.title || "Default Title"}}
      </span>

      <!--[hidden]="selectedCategoryId !== records[key].id"-->

      <!--<input type="text"  hidden-->
             <!--[(ngModel)]="titles[records[key].id]" (focusout)="changeTitle()" (keyup.enter)="changeTitle()"-->
             <!--style="width: 100px"-->
        <!--/>-->

       <span class="right hoverable" >
        <ion-icon name="ios-remove-circle-outline" (click)="confirmDelete(records[key].id)"></ion-icon>
      </span>

       <span class="right hoverable" style="margin-right: 15px;">
         <ion-icon name="ios-folder-open-outline" (click) = "presentPopover(records[key].id)"></ion-icon>
      </span>
    </ion-card-header>

    <ion-card-content>
      <div style= "margin: auto; text-align: center; font-size: 2rem">
        <strong>
          {{formatDuration(records[key].doc.duration)}}
        </strong>
      </div>

      <div>
        <small class="right time-format">
          {{records[key].doc.timestamp | dateFromMilli}}
        </small>
      </div>
    </ion-card-content>

  </ion-card>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <ion-title>Total time: <span style="float: right;">  {{formatDuration(totalTime)}}</span> </ion-title>
  </ion-toolbar>
</ion-footer>
